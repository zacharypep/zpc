#pragma once

#include <stddef.h>
#include <stdlib.h>

#include "zpc/arena.h"

#ifdef __cplusplus
#define EXTERN_C extern "C"
#else
#define EXTERN_C extern
#endif

// =========================================================================================================================================
// =========================================================================================================================================
// =========================================================================================================================================
// =========================================================================================================================================
constexpr size_t NULL_TERM_SIZE = 1U;

typedef struct str_zt
{
    char* data;
    size_t size;
} str_zt;

typedef struct string_builder_zt
{
    arena_zh arena;
    char* data;
    size_t size;
    size_t capacity;
} string_builder_zt;

// =========================================================================================================================================
// =========================================================================================================================================
// =========================================================================================================================================
// =========================================================================================================================================
EXTERN_C bool str_from_cstr_z(arena_zh arena, str_zt* str, size_t count, ...);
EXTERN_C void sb_init_z(string_builder_zt* sb, arena_zh arena, size_t initial_capacity);
EXTERN_C void sb_ensure_capacity_z(string_builder_zt* sb, size_t additional);
EXTERN_C void sb_append_z(string_builder_zt* sb, const char* str);
EXTERN_C void sb_append_fmt_z(string_builder_zt* sb, const char* fmt, ...);

// =========================================================================================================================================
// =========================================================================================================================================
// =========================================================================================================================================
// =========================================================================================================================================
#define STR(A_arena, A_str, A_cstr) (str_from_cstr_z(A_arena, A_str, 1, A_cstr))
